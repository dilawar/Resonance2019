\RequirePackage{luatex85,shellesc}
\documentclass[crop, multi=false]{standalone}
\usepackage{pgfplots}
\usepackage{tabularx}
\usepgfplotslibrary{units}

\usepackage[sfdefault]{FiraSans}
\usepackage[small]{eulervm}

\begin{document}

\pgfplotsset{
    , xtick align=center
    , ytick align=center
    , unit markings=parenthesis
    , legend style={fill=none,draw=none,font=\footnotesize}
    , axis lines=left
    , try min ticks=3
}

\def\W{4.5cm}
\def\H{3cm}

\begin{tabularx}{11cm}{X X}
\begin{tikzpicture}[scale=1]
    \begin{axis}[ xlabel=Time, x unit=au 
        % , y unit = au
        , ytick = \empty
        , width=\W, height=\H
        % , ymin = 1
        , axis lines=none
        ]
    \addplot [color=blue] gnuplot [ raw gnuplot ] {
        set datafile separator ',';
        plot "./simulations/bistable_graded.csv" using 0:(column("switch0"));
    };
    \end{axis}
\end{tikzpicture}
&
\begin{tikzpicture}[scale=1]
    \begin{axis}[ xlabel=Time, x unit=au 
        % , y unit = au
        , ytick = \empty
        , width=\W, height=\H
        , axis lines=none
        ]
    \addplot [color=blue!30] gnuplot [ raw gnuplot ] {
        set datafile separator ',';
        plot "./simulations/bistable_graded.csv" using 0:(column("switch1"));
        plot "./simulations/bistable_graded.csv" using 0:(1.5+column("switch2"));
        plot "./simulations/bistable_graded.csv" using 0:(3+column("switch2"));
    };
    \addplot [color=blue] gnuplot [ raw gnuplot ] {
        set datafile separator ',';
        plot "./simulations/bistable_graded.csv" using
            0:((column("switch1")+column("switch2")+column("switch3")));
    };
    \end{axis}
\end{tikzpicture}
\\
\begin{tikzpicture}[scale=1]
    \begin{axis}[ xlabel=Time, x unit=au 
        % , y unit = au
        , width=\W, height=\H
        , axis y line=none
        % , ymin = 1
        , title = Synaptic Strength
        ]
    \addplot [color=blue] gnuplot [ raw gnuplot ] {
        set datafile separator ',';
        set samples 40;
        plot "./simulations/bistable_graded.csv" using 0:(2+column("switch0"))
            smooth cspline;
    };
    \end{axis}
\end{tikzpicture}
&
\begin{tikzpicture}[scale=1]
    \begin{axis}[ xlabel=Time, x unit=au 
        % , y unit = au
        % , ytick=\empty
        , axis y line=none
        , width=\W, height=\H
        % , ymin = 1
        , title = Synaptic Strength
        ]
    \addplot [color=blue] gnuplot [ raw gnuplot ] {
        set datafile separator ',';
        set samples 200;
        plot "./simulations/bistable_graded.csv" using
        0:(2+(column("switch1")+column("switch2")+column("switch3")/3))
            smooth cspline;
    };
    \end{axis}
\end{tikzpicture}
\end{tabularx}

\end{document}

